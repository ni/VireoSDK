// Test scan from string
define(HelloWorld dv(.VirtualInstrument (
    c(
	e(dv(.UInt32 ) offset_past)
	e(dv(.String ) remaining)
	e(dv(.String ) v1)
	e(dv(.String ) v2)
	e(dv(.String ) v3)
	e(dv(.String ) v4)
	e(dv(.Single ) f1)
	e(dv(.Double ) d1)
	e(dv(.ComplexDouble (0 0)) cd1)
	e(dv(.Int32 ) i1)
	e(dv(.Int32 ) i2)
	e(dv(.Int32 ) int32)
	e(dv(.UInt32 ) uint32)
	e(dv(.Int16 ) int16)
	e(dv(.UInt16 ) uint16)
	e(dv(.Int8 ) int8)
	e(dv(.UInt8 ) uint8)
	e(dv(.String " 123.5 89 ") input1)
	e(dv(.String "(345.5 89)") inputcmplx1)
	e(dv(.String "678.5 + 78i") inputcmplx2)
	e(dv(.String " +127.5 .23 ") input2)
	e(dv(.String " -923 -0077 ") input3)
	e(dv(.String "123-56") input4)
	e(dv(.String " 12E3.5") input5)
	e(dv(.String " 123.5+8E9") input6)
	e(dv(.String "12.3E5+8E9 ") input7)
	e(dv(.String " 067.3E5 ") input8)
	e(dv(.String "  67+235 ") input9)
	e(dv(.String "-67 +235ABCD") input10)
	e(dv(.String "-67 +235ABCD") input11)
	e(dv(.String "-67 +ABCD") input11)
	e(dv(.String "-67 -10") input12)
	e(dv(.String "173 109088") input13)
	e(dv(.String "-106 -809") input14)
	e(dv(.String "12345845QQTAvasd ") input15)
	e(dv(.String "123,  7200") input16)
	e(dv(.String "1110100011") input17)
	e(dv(.String "11113100045") input18)
	e(dv(.String "31.4e6123") input19)
	e(dv(.String "31.4e+6123") input20)
	e(dv(.String "abcdefg ABCDEFG 1234567 *&*^^&^@!~  ") input21)
	e(dv(.String "abcdefg~") input22)
	e(dv(.String "     abcdefg   ABCDEFG1234567") input23)
	e(dv(.String " 1245644 abcdefg   ABCDEFG1234567") input24)
	e(dv(.String " hello worldMy name is :") input25)
	e(dv(.String "123.5") input26)
	e(dv(.String "123,5") input27)
	e(dv(.String "  -12453") negmin)
	e(dv(.String "  -2240483647") intmin)
	e(dv(.String "  2140483647") int32max)
	e(dv(.String "  4290967295") uint32max)
	e(ErrorCluster noErr)
	e(ErrorCluster err)
    )
    clump (
	Printf ("---test scan complex------ (%s)\n" inputcmplx1)
	Copy(noErr err)
	StringScan(inputcmplx1 remaining "%f" 0 offset_past err cd1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%z> err:<%z>\n" offset_past remaining cd1 err)
	Copy(noErr err)
	StringScan(inputcmplx2 remaining "%f" 0 offset_past err cd1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%z> err:<%z>\n" offset_past remaining cd1 err)

	Printf ("---test scan float------ (%s)\n" input1)
	Copy(noErr err)
	StringScan(input1 remaining "%f %e" 0 offset_past err f1 d1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%f> err:<%z>\n" offset_past remaining f1 d1  err)
	Copy(noErr err)
	StringScan(input1 remaining "%f %e" 0 offset_past err i2 i1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%d> err:<%z>\n" offset_past remaining i2 i1  err)
	Printf ("---test scan float------ (%s)\n" input2 )
	Copy(noErr err)
	StringScan(input2 remaining "%f %e" 0 offset_past err f1 d1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%f> err:<%z>\n" offset_past remaining f1 d1  err)
	Printf ("---test scan float------ (%s)\n" input3 )
	Copy(noErr err)
	StringScan(input3 remaining "%f %f" 0 offset_past err d1 f1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%f> err:<%z>\n" offset_past remaining d1 f1  err)
	Printf ("---test scan float------ (%s)\n" input4 )
	Copy(noErr err)
	StringScan(input4 remaining "%f %f" 0 offset_past err d1 f1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%f> err:<%z>\n" offset_past remaining d1 f1  err)
	Printf ("---test scan float------ (%s)\n" input5 )
	Copy(noErr err)
	StringScan(input5 remaining "%f %f" 0 offset_past err d1 f1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%f> err:<%z>\n" offset_past remaining d1 f1  err)
	Printf ("---test scan float------ (%s)\n" input6 )
	Copy(noErr err)
	StringScan(input6 remaining "%f %f" 0 offset_past err d1 f1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%f> err:<%z>\n" offset_past remaining d1 f1  err)
	Printf ("---test scan float------ (%s)\n" input7 )
	Copy(noErr err)
	StringScan(input7 remaining "%f %f" 0 offset_past err d1 f1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%f> err:<%z>\n" offset_past remaining d1 f1  err)
	Printf ("---test scan Int base10------ (%s)\n" input8 )
	Copy(noErr err)
	StringScan(input8 remaining "%d %f" 0 offset_past err i1 f1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%f> err:<%z>\n" offset_past remaining i1 f1  err)
	Printf ("---test scan Int base10------ (%s)\n" input9 )
	Copy(noErr err)
	StringScan(input9 remaining "%d %d" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan Int base10------ (%s)\n" input10 )
	Copy(noErr err)
	StringScan(input10 remaining "%d %d" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan Int base16------ (%s)\n" input11 )
	Copy(noErr err)
	StringScan(input11 remaining "%d %x" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan Int base16------ (%s)\n" input12 )
	Copy(noErr err)
	StringScan(input12 remaining "%x %x" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan Int base8------ (%s)\n" input13 )
	Copy(noErr err)
	StringScan(input13 remaining "%o %o" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan Int base8------ (%s)\n" input14 )
	Copy(noErr err)
	StringScan(input14 remaining "%o %o" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan Intwidth------ (%s)\n" input15 )
	Copy(noErr err)
	StringScan(input15 remaining "%3d %2d" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan Intwidth------ (%s)\n" input16 )
	Copy(noErr err)
	StringScan(input16 remaining "%3d,%d" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan IntBinary------ (%s)\n" input17 )
	Copy(noErr err)
	StringScan(input17 remaining "%2b,%d" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan IntBinary------ (%s)\n" input18 )
	Copy(noErr err)
	StringScan(input18 remaining "%b3%b" 0 offset_past err i1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> <%d> err:<%z>\n" offset_past remaining i1 i2  err)
	Printf ("---test scan FloatWidth------ (%s)\n" input19 )
	Copy(noErr err)
	StringScan(input19 remaining "%4f%d" 0 offset_past err f1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%d> err:<%z>\n" offset_past remaining f1 i2  err)
	Printf ("---test scan FloatWidth------ (%s)\n" input20 )
	Copy(noErr err)
	StringScan(input20 remaining "%5f%d" 0 offset_past err f1 i2)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> <%d> err:<%z>\n" offset_past remaining f1 i2  err)
	Printf ("---test scan String------ (%s)\n" input21 )
	Copy(noErr err)
	StringScan(input21 remaining "%s%s %s%s" 0 offset_past err v1 v2 v3)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%s> <%s> <%s> err:<%z>\n" offset_past remaining v1 v2 v3 err)
	Printf ("---test scan String------ (%s)\n" input22 )
	Copy(noErr err)
	StringScan(input22 remaining "%s%s %s%s" 0 offset_past err v1 v2 v3)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%s> <%s> <%s> err:<%z>\n" offset_past remaining v1 v2 v3 err)
	Printf ("---test scan String------ (%s)\n" input23 )
	Copy(noErr err)
	StringScan(input23 remaining "%1[ ]%s %s%s" 0 offset_past err v1 v2 v3)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%s> <%s> <%s> err:<%z>\n" offset_past remaining v1 v2 v3 err)
	Printf ("---test scan String charset------ (%s)\n" input24 )
	Copy(noErr err)
	StringScan(input24 remaining "%6[1-9 ]%s %s%s" 0 offset_past err v1 v2 v3 v4)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%s> <%s> <%s> <%s> err:<%z>\n" offset_past remaining v1 v2 v3 v4  err)
	Printf ("---test scan String------ (%s)\n" input25 )
	Copy(noErr err)
	StringScan(input25 remaining "%3s%s %12s%s" 0 offset_past err v1 v2 v3 v4)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%s> <%s> <%s> <%s> err:<%z>\n" offset_past remaining v1 v2 v3 v4  err)
	Printf ("---test scan overflow signed max------ (%s)\n" int32max )
	Copy(noErr err)
	StringScan(int32max remaining "%u" 0 offset_past err int8)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining int8  err)
	Printf ("---test scan overflow unsigned max------ (%s)\n" uint32max )
	Copy(noErr err)
	StringScan(uint32max remaining "%u" 0 offset_past err uint8)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining uint8  err)
	Printf ("---test scan overflow min------ (%s)\n" intmin )
	Copy(noErr err)
	StringScan(intmin remaining "%u" 0 offset_past err int8)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining int8  err)
	Printf ("---test scan overflow neg------ (%s)\n" negmin )
	Copy(noErr err)
	StringScan(negmin remaining "%u" 0 offset_past err uint8)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining uint8  err)

	Printf ("---test scan overflow signed max------ (%s)\n" int32max )
	Copy(noErr err)
	StringScan(int32max remaining "%u" 0 offset_past err int16)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining int16  err)
	Printf ("---test scan overflow unsigned max------ (%s)\n" uint32max )
	Copy(noErr err)
	StringScan(uint32max remaining "%u" 0 offset_past err uint16)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining uint16  err)
	Printf ("---test scan overflow min------ (%s)\n" intmin )
	Copy(noErr err)
	StringScan(intmin remaining "%u" 0 offset_past err int16)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining int16  err)
	Printf ("---test scan overflow neg------ (%s)\n" negmin )
	Copy(noErr err)
	StringScan(negmin remaining "%u" 0 offset_past err uint16)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining uint16  err)

	Printf ("---test scan overflow signed max------ (%s)\n" uint32max )
	Copy(noErr err)
	StringScan(uint32max remaining "%u" 0 offset_past err int32)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining int32  err)
	Printf ("---test scan overflow unsigned max------ (%s)\n" uint32max )
	Copy(noErr err)
	StringScan(uint32max remaining "%u" 0 offset_past err uint32)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining uint32  err)
	Printf ("---test scan overflow min------ (%s)\n" intmin )
	Copy(noErr err)
	StringScan(intmin remaining "%u" 0 offset_past err int32)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining int32  err)
	Printf ("---test scan overflow  neg------ (%s)\n" negmin )
	Copy(noErr err)
	StringScan(negmin remaining "%u" 0 offset_past err uint32)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%d> err:<%z>\n" offset_past remaining uint32  err)

	Printf ("---test scan special------ (%s)\n" input26)
	Copy(noErr err)
	StringScan(input26 remaining "%.;%f" 0 offset_past err d1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> err:<%z>\n" offset_past remaining d1  err)
	Copy(noErr err)
	StringScan(input27 remaining "%,;%f" 0 offset_past err d1)
	Printf ("offset_past:<%d>, remaining:(%s)\n:<%f> err:<%z>\n" offset_past remaining d1  err)
    )
) ) )
enqueue(HelloWorld)
